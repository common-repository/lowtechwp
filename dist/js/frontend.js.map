{"version":3,"sources":["profile/indicator.js","media/image-preview-link.js","media/index.js","index.js"],"names":["Indicator","args","render","performance","undefined","list","getEntriesByType","transferred","i","length","transferSize","transferKBValueSpan","document","querySelector","textContent","Math","round","transferCO2ValueSpan","CO2Value","transferImpactFactors","CO2","body","innerHTML","widgetHTML","updateTransferIndicator","ImagePreviewLink","querySelectorAll","forEach","link","init","status","ProfileIndicator","fetch","then","response","json","catch","error","console","log","require"],"mappings":"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","file":"frontend.js","sourceRoot":"../../js/frontend","sourcesContent":["/**\n * Show the profile indicator.\n */\nclass Indicator {\n  constructor( args ) {\n\t\tthis.args = args;\n\t\tthis.render();\n\t}\n\n\tupdateTransferIndicator() {\n\t\tif ( performance === undefined ) {\n\t\t\treturn;\n\t\t}\n\t\tvar list = performance.getEntriesByType( \"resource\" );\n\t\tif ( list === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar transferred = 0;\n\t\tfor ( var i=0; i < list.length; i++ ) {\n\t\t\t// console.log(\"== Resource[\" + i + \"] - \" + list[i].name);\n\t\t\tif ( \"transferSize\" in list[i] ) {\n\t\t\t\t// console.log(\"... transferSize[\" + i + \"] = \" + list[i].transferSize);\n\t\t\t\ttransferred += list[i].transferSize;\n\t\t\t}\n\t\t}\n\t\tvar transferKBValueSpan = document.querySelector( \".ltwp-indicator__transfer-kb-value\" );\n\t\tif ( transferKBValueSpan ) {\n\t\t\ttransferKBValueSpan.textContent = Math.round( transferred / 1000 );\n\t\t}\n\t\tvar transferCO2ValueSpan = document.querySelector( \".ltwp-indicator__transfer-co2-value\" );\n\t\tif ( transferCO2ValueSpan ) {\n\t\t\tvar CO2Value = Math.round( transferred * this.args.transferImpactFactors.CO2 * 100 ) / 100;\n\t\t\ttransferCO2ValueSpan.textContent = CO2Value;\n\t\t}\n\t}\n\n\trender() {\n\t\tdocument.body.innerHTML += this.args.widgetHTML;\n\t\tthis.updateTransferIndicator();\n\t};\n};\n\nexport default Indicator;","/**\n * Implements the image preview link.\n */\nclass ImagePreviewLink {\n  constructor( args ) {\n\t\tthis.args = args;\n\t\tthis.render();\n\t}\n\trender() {\n\t};\n};\n\nexport default ImagePreviewLink;","import ImagePreviewLink from \"./image-preview-link.js\";\n\ndocument.querySelectorAll( '.ltwp-image-preview__link' ).forEach(\n\tlink => new ImagePreviewLink( link ) );","\"use strict\";\n\nimport ProfileIndicator from \"./profile/indicator.js\";\n\nvar init = function( status ) {\n\tnew ProfileIndicator( status );\n};\n\nfetch( '/wp-json/ltwp/v1/status', {} )\n\t.then( response => response.json() )\n\t.then( response => response.widgetHTML && init( response ) )\n\t.catch( error => console.log( error ) );\n\nrequire( \"./media/index.js\" );"]}
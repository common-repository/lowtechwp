{"version":3,"sources":["../../../node_modules/parcel/src/builtins/bundle-url.js","../../../node_modules/parcel/src/builtins/bundle-loader.js","page.js","../store.js","../../../node_modules/parcel/src/builtins/loaders/browser/js-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","require","loadBundlesLazy","bundles","Array","isArray","id","length","Promise","resolve","code","LazyPromise","reject","loadBundles","slice","then","all","map","loadBundle","bundleLoaders","registerBundleLoader","type","loader","module","load","register","bundle","substring","lastIndexOf","toLowerCase","bundleLoader","resolved","catch","e","executor","promise","prototype","onSuccess","onError","document","getElementById","Recipes","wp","element","render","SettingsTabs","data","applyMiddleware","withSelect","withDispatch","registerStore","combineReducers","createMiddleware","reduxRoutine","actions","toggleStep","recipe","step","requestRecipeStates","receiveRecipeStates","state","status","response","receiveRecipeStatesError","savingSettings","saving","updateSetting","key","value","requestSettings","receiveSettings","receiveSettingsError","stepToggled","action","settings","weather_location","fetchRecipeStates","isLoading","undefined","error","fetchSettings","console","log","isSaving","Store","reducer","selectors","getRecipes","recipes","getSettings","getStepToggled","hasError","retrieveRecipeStates","fetch","dispatch","opts","headers","wpApiSettings","nonce","root","json","saveRecipeStates","method","body","JSON","stringify","getState","retrieveSettings","saveSettings","script","createElement","async","charset","src","onerror","onload","getElementsByTagName","appendChild"],"mappings":";AAAA,IAAIA,EAAY,KAChB,SAASC,IAKAD,OAJFA,IACHA,EAAYE,KAGPF,EAGT,SAASE,IAEH,IACI,MAAA,IAAIC,MACV,MAAOC,GACHC,IAAAA,GAAW,GAAKD,EAAIE,OAAOC,MAAM,iEACjCF,GAAAA,EACKG,OAAAA,EAAWH,EAAQ,IAIvB,MAAA,IAGT,SAASG,EAAWC,GACX,OAAC,GAAKA,GAAKC,QAAQ,wEAAwE,MAAQ,IAG5GC,QAAQT,aAAeD,EACvBU,QAAQH,WAAaA;;AC5BrB,IAAIN,EAAeU,QAAQ,gBAAgBV,aAE3C,SAASW,EAAgBC,GAClBC,MAAMC,QAAQF,KACjBA,EAAU,CAACA,IAGTG,IAAAA,EAAKH,EAAQA,EAAQI,OAAS,GAE9B,IACKC,OAAAA,QAAQC,QAAQR,QAAQK,IAC/B,MAAOb,GACHA,GAAa,qBAAbA,EAAIiB,KACC,OAAA,IAAIC,EAAY,SAAUF,EAASG,GACxCC,EAAYV,EAAQW,MAAM,GAAI,IAC3BC,KAAK,WACGd,OAAAA,QAAQK,KAEhBS,KAAKN,EAASG,KAIfnB,MAAAA,GAIV,SAASoB,EAAYV,GACZK,OAAAA,QAAQQ,IAAIb,EAAQc,IAAIC,IAGjC,IAAIC,EAAgB,GACpB,SAASC,EAAqBC,EAAMC,GAClCH,EAAcE,GAAQC,EAGxBC,OAAOvB,QAAUA,QAAUE,EAC3BF,QAAQwB,KAAOX,EACfb,QAAQyB,SAAWL,EAEnB,IAAIjB,EAAU,GACd,SAASe,EAAWQ,GACdpB,IAAAA,EAMAH,GALAC,MAAMC,QAAQqB,KAChBpB,EAAKoB,EAAO,GACZA,EAASA,EAAO,IAGdvB,EAAQuB,GACHvB,OAAAA,EAAQuB,GAGbL,IAAAA,GAAQK,EAAOC,UAAUD,EAAOE,YAAY,KAAO,EAAGF,EAAOnB,SAAWmB,GAAQG,cAChFC,EAAeX,EAAcE,GAC7BS,OAAAA,EACK3B,EAAQuB,GAAUI,EAAavC,IAAiBmC,GACpDX,KAAK,SAAUgB,GAKPA,OAJHA,GACFR,OAAOG,OAAOD,SAASnB,EAAIyB,GAGtBA,IACNC,MAAM,SAASC,GAGVA,aAFC9B,EAAQuB,GAETO,SAXRH,EAgBN,SAASnB,EAAYuB,GACdA,KAAAA,SAAWA,EACXC,KAAAA,QAAU,KAGjBxB,EAAYyB,UAAUrB,KAAO,SAAUsB,EAAWC,GAEzC,OADc,OAAjB,KAAKH,UAAkB,KAAKA,QAAU,IAAI3B,QAAQ,KAAK0B,WACpD,KAAKC,QAAQpB,KAAKsB,EAAWC,IAGtC3B,EAAYyB,UAAUJ,MAAQ,SAAUM,GAE/B,OADc,OAAjB,KAAKH,UAAkB,KAAKA,QAAU,IAAI3B,QAAQ,KAAK0B,WACpD,KAAKC,QAAQH,MAAMM;;ACjFvBC,SAASC,eAAgB,sBACrB,QAAA,iBAAA,CAAA,QAAA,QAAA,sBAAsBzB,KAC7B,SAAC0B,GACAC,GAAGC,QAAQC,OAAQ,MAAA,cAAA,MAAA,CAAK,UAAU,QAAO,MAAC,cAAA,EAAvB,OAAwCL,SAASC,eAAgB,wBAIlFD,SAASC,eAAgB,uBACrB,QAAA,iBAAA,CAAA,QAAA,QAAA,yBAAyBzB,KAChC,SAAC8B,GACAH,GAAGC,QAAQC,OAAQ,MAAA,cAAA,MAAA,CAAK,UAAU,QAAO,MAAC,cAAA,EAAvB,OAA6CL,SAASC,eAAgB;;AC+N5F,aAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,GAAA,GAAA,EAAA,EAAA,MAAA,MAAA,GAAA,YAAA,EAAA,GAAA,EAAA,KAAA,EAAA,GAAA,QAAA,QAAA,GAAA,KAAA,EAAA,GAAA,SAAA,EAAA,GAAA,OAAA,WAAA,IAAA,EAAA,KAAA,EAAA,UAAA,OAAA,IAAA,QAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,MAAA,EAAA,GAAA,SAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,SAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,GAAA,OAAA,MAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,GAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,GAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,iBAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,aAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,aAAA,QAAA,WAAA,QAAA,aAAA,EAzOsFE,IAAAA,EAAAA,GAAGI,KAAjFC,EAAAA,EAAAA,gBAAiBC,EAAAA,EAAAA,WAAYC,EAAAA,EAAAA,aAAcC,EAAAA,EAAAA,cAAeC,EAAAA,EAAAA,gBAyOlE,QAAA,aAAA,EAAA,QAAA,WAAA,EAxOA,IAAMC,EAAmBV,GAAGW,aAEtBC,EAAU,CACfC,WAAYC,SAAAA,GACJ,MAAA,CACNnC,KAAM,cACNmC,OAAAA,EACAC,KAJuB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,OAOzBC,oBAAsB,WACd,MAAA,CACNrC,KAAM,uBAGRsC,oBAAqBC,SAAAA,GACb,MAAA,CACNvC,KAAM,qBACNwC,OAAQ,UACRC,SAAUF,IAGZG,yBAA0BH,SAAAA,GAClB,MAAA,CACNvC,KAAM,qBACNwC,OAAQ,UAGVG,eAA+B,WACvB,MAAA,CACN3C,KAAM,kBACN4C,OAHqB,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,KAMvBC,cAAeC,SAAAA,GACP,MAAA,CACN9C,KAAM,iBACN8C,IAAAA,EACAC,MAJwB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,OAO1BC,gBAAkB,WACV,MAAA,CACNhD,KAAM,mBAGRiD,gBAAiBV,SAAAA,GACT,MAAA,CACNvC,KAAM,iBACNwC,OAAQ,UACRC,SAAUF,IAGZW,qBAAsBX,SAAAA,GACd,MAAA,CACNvC,KAAM,iBACNwC,OAAQ,WAOX,SAASW,IAAaZ,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIa,EAAS,UAAA,OAAA,EAAA,UAAA,QAAA,EACpCN,EAAMM,EAAOhB,KAAOgB,EAAOjB,OAAS,IAAMiB,EAAOhB,KAAOgB,EAAOjB,OAC5DiB,OAAAA,EAAOpD,MACX,IAAA,cAEAuC,OAAAA,EAAAA,GAAAA,EACFO,EAAAA,GAAAA,GAAQP,EAAMO,KAEZ,IAAA,qBACKM,OAAAA,EAAOZ,QACX,IAAA,UACGY,OAAAA,EAAOX,UAGTF,OAAAA,EAIR,SAASc,IAAUd,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,CAAEe,iBAAkB,OAASF,EAAS,UAAA,OAAA,EAAA,UAAA,QAAA,EACvDA,OAAAA,EAAOpD,MACX,IAAA,iBAEAuC,OAAAA,EAAAA,GAAAA,EACFa,EAAAA,GAAAA,EAAON,IAAMM,EAAOL,QAElB,IAAA,iBACKK,OAAAA,EAAOZ,QACX,IAAA,UACGY,OAAAA,EAAOX,UAGTF,OAAAA,EAKR,SAASgB,IAAmBhB,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,CAAEiB,WAAW,GAASJ,EAAS,UAAA,OAAA,EAAA,UAAA,QAAA,EACzDA,OAAAA,EAAOpD,MACX,IAAA,qBACKoD,OAAAA,EAAOZ,QACXiB,UAAAA,EAEAlB,OAAAA,EAAAA,GAAAA,EADJ,CAECiB,WAAW,IAER,IAAA,UAEAjB,OAAAA,EAAAA,GAAAA,EADJ,CAECiB,WAAW,IAER,IAAA,QAEAjB,OAAAA,EAAAA,GAAAA,EADJ,CAECmB,OAAO,EACPF,WAAW,KAIPjB,OAAAA,EAIR,SAASoB,IAAepB,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,CAAEiB,WAAW,GAASJ,EAAS,UAAA,OAAA,EAAA,UAAA,QAAA,EACrDA,OAAAA,EAAOpD,MACX,IAAA,kBAGAuC,OAFJqB,QAAQC,IAAK,UAAWT,EAAOR,QAE3BL,EAAAA,GAAAA,EADJ,CAECuB,SAAUV,EAAOR,SAEd,IAAA,iBACKQ,OAAAA,EAAOZ,QACXiB,UAAAA,EAEAlB,OAAAA,EAAAA,GAAAA,EADJ,CAECiB,WAAW,IAER,IAAA,UAEAjB,OAAAA,EAAAA,GAAAA,EADJ,CAECiB,WAAW,IAER,IAAA,QAEAjB,OAAAA,EAAAA,GAAAA,EADJ,CAECmB,OAAO,EACPF,WAAW,KAIPjB,OAAAA,EAGR,IAAMwB,EAAQlC,EAAe,OAAQ,CACpCmC,QAASlC,EAAiB,CACzByB,kBAAAA,EACAJ,YAAAA,EACAE,SAAAA,EACAM,cAAAA,IAED1B,QAAAA,EAEAgC,UAAW,CACVC,WAAY3B,SAAAA,GACJA,OAAAA,EAAM4B,SAEdC,YAAa7B,SAAAA,GACLA,OAAAA,EAAMc,UAEdgB,eAAgB9B,SAAAA,GACRA,OAAAA,EAAMY,aAAe,IAE7BW,SAAUvB,SAAAA,GACFA,OAAAA,EAAMoB,eAAiBpB,EAAMoB,cAAcG,UAEnDN,UAAWjB,SAAAA,GACHA,OAAAA,EAAMgB,mBAAqBhB,EAAMgB,kBAAkBC,WACtDjB,EAAMoB,eAAiBpB,EAAMoB,cAAcH,WAEhDc,SAAU/B,SAAAA,GACFA,OAAAA,EAAMgB,mBAAqBhB,EAAMgB,kBAAkBG,OACtDnB,EAAMoB,eAAiBpB,EAAMoB,cAAcD,UAKnCa,SAAAA,IA2Cf,OAAA,EAAA,MAAA,KAAA,WAAA,SAAA,IAAA,OAAA,EAAA,EA3CA,mBAAA,KAAA,SAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EAOsBC,OANrBT,EAAMU,SAAUxC,EAAQI,uBAClBqC,EAAO,CACZC,QAAS,CACMC,aAAAA,cAAcC,QAJ/B,EAAA,KAAA,EAOsBL,MAAOI,cAAcE,KAAO,kBAAmBJ,GAPrE,KAAA,EAQkBjC,OADbA,EAPL,EAAA,KAAA,EAAA,KAAA,EAQkBA,EAASsC,OAR3B,KAAA,GAQKA,EARL,EAAA,MAUEhB,EAAMU,SAAUxC,EAAQK,oBAAqByC,IAE7ChB,EAAMU,SAAUxC,EAAQS,4BAZ1B,KAAA,EAAA,IAAA,MAAA,OAAA,EAAA,SAAA,OA2CA,MAAA,KAAA,WA3BesC,SAAAA,IA2Bf,OAAA,EAAA,MAAA,KAAA,WAAA,SAAA,IAAA,OAAA,EAAA,EA3BA,mBAAA,KAAA,SAAA,IAAA,IAAA,EAAA,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EACON,EAAO,CACZC,QAAS,CACMC,aAAAA,cAAcC,OAE7BI,OAAQ,OACRC,KAAMC,KAAKC,UAAWrB,EAAMsB,WAAWlC,cAExCqB,MAAOI,cAAcE,KAAO,kBAAmBJ,GARhD,KAAA,EAAA,IAAA,MAAA,OAAA,EAAA,SAAA,OA2BA,MAAA,KAAA,WAhBeY,SAAAA,IAgBf,OAAA,EAAA,MAAA,KAAA,WAAA,SAAA,IAAA,OAAA,EAAA,EAhBA,mBAAA,KAAA,SAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EAOsBd,OANrBT,EAAMU,SAAUxC,EAAQe,mBAClB0B,EAAO,CACZC,QAAS,CACMC,aAAAA,cAAcC,QAJ/B,EAAA,KAAA,EAOsBL,MAAOI,cAAcE,KAAO,mBAAoBJ,GAPtE,KAAA,EAQkBjC,OADbA,EAPL,EAAA,KAAA,EAAA,KAAA,EAQkBA,EAASsC,OAR3B,KAAA,GAQKA,EARL,EAAA,MAUEhB,EAAMU,SAAUxC,EAAQgB,gBAAiB8B,IAEzChB,EAAMU,SAAUxC,EAAQiB,wBAZ1B,KAAA,EAAA,IAAA,MAAA,OAAA,EAAA,SAAA,OAgBA,MAAA,KAAA,WAAeqC,SAAAA,IAAf,OAAA,EAAA,MAAA,KAAA,WAAA,SAAA,IAAA,OAAA,EAAA,EAAA,mBAAA,KAAA,SAAA,IAAA,IAAA,EAAA,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EASsBf,OARrBT,EAAMU,SAAUxC,EAAQU,gBAAgB,IAClC+B,EAAO,CACZC,QAAS,CACMC,aAAAA,cAAcC,OAE7BI,OAAQ,OACRC,KAAMC,KAAKC,UAAWrB,EAAMsB,WAAWhC,WAPzC,EAAA,KAAA,EASsBmB,MAAOI,cAAcE,KAAO,mBAAoBJ,GATtE,KAAA,EAAA,EAAA,KAUCX,EAAMU,SAAUxC,EAAQU,gBAAgB,IAVzC,KAAA,EAAA,IAAA,MAAA,OAAA,EAAA,SAAA,OAAA,MAAA,KAAA,WAAA,QAAA,QAAA;;ACzOAzC,OAAOvB,QAAU,SAAsB0B,GAC9B,OAAA,IAAIlB,QAAQ,SAAUC,EAASG,GAChCiG,IAAAA,EAAStE,SAASuE,cAAc,UACpCD,EAAOE,OAAQ,EACfF,EAAOxF,KAAO,kBACdwF,EAAOG,QAAU,QACjBH,EAAOI,IAAMvF,EACbmF,EAAOK,QAAU,SAAUjF,GACzB4E,EAAOK,QAAUL,EAAOM,OAAS,KACjCvG,EAAOqB,IAGT4E,EAAOM,OAAS,WACdN,EAAOK,QAAUL,EAAOM,OAAS,KACjC1G,KAGF8B,SAAS6E,qBAAqB,QAAQ,GAAGC,YAAYR","file":"page.js","sourceRoot":"../../../../js/ui/admin","sourcesContent":["var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","if ( document.getElementById( 'lowtechwp-recipes' ) ) {\n\timport( '../recipe/recipes' ).then(\n\t\t(Recipes) => {\n\t\t\twp.element.render( <div className=\"wrap\"><Recipes/></div>, document.getElementById( 'lowtechwp-recipes' ) );\n\t\t} );\n}\n\nif ( document.getElementById( 'lowtechwp-settings' ) ) {\n\timport( '../settings/settings' ).then(\n\t\t(SettingsTabs) => {\n\t\t\twp.element.render( <div className=\"wrap\"><SettingsTabs/></div>, document.getElementById( 'lowtechwp-settings' ) );\n\t\t} );\n}\n","const { applyMiddleware, withSelect, withDispatch, registerStore, combineReducers } = wp.data;\nconst createMiddleware = wp.reduxRoutine;\n\nconst actions = {\n\ttoggleStep( recipe, step=null ) {\n\t\treturn {\n\t\t\ttype: 'TOGGLE_STEP',\n\t\t\trecipe,\n\t\t\tstep,\n\t\t};\n\t},\n\trequestRecipeStates() {\n\t\treturn {\n\t\t\ttype: 'FETCH_RECIPESTATES',\n\t\t};\n\t},\n\treceiveRecipeStates( state ) {\n\t\treturn {\n\t\t\ttype: 'FETCH_RECIPESTATES',\n\t\t\tstatus: 'success',\n\t\t\tresponse: state,\n\t\t};\n\t},\n\treceiveRecipeStatesError( state ) {\n\t\treturn {\n\t\t\ttype: 'FETCH_RECIPESTATES',\n\t\t\tstatus: 'error',\n\t\t};\n\t},\n\tsavingSettings( saving=false ) {\n\t\treturn {\n\t\t\ttype: 'SAVING_SETTINGS',\n\t\t\tsaving: saving,\n\t\t};\n\t},\n\tupdateSetting( key, value=null ) {\n\t\treturn {\n\t\t\ttype: 'UPDATE_SETTING',\n\t\t\tkey,\n\t\t\tvalue,\n\t\t};\n\t},\n\trequestSettings() {\n\t\treturn {\n\t\t\ttype: 'FETCH_SETTINGS',\n\t\t};\n\t},\n\treceiveSettings( state ) {\n\t\treturn {\n\t\t\ttype: 'FETCH_SETTINGS',\n\t\t\tstatus: 'success',\n\t\t\tresponse: state,\n\t\t};\n\t},\n\treceiveSettingsError( state ) {\n\t\treturn {\n\t\t\ttype: 'FETCH_SETTINGS',\n\t\t\tstatus: 'error',\n\t\t};\n\t},\n};\n\n\n// Reducer for step toggling.\nfunction stepToggled( state = {}, action ) {\n\tconst key = action.step ? action.recipe + '.' + action.step : action.recipe;\n\tswitch ( action.type ) {\n\tcase 'TOGGLE_STEP':\n\t\treturn {\n\t\t\t...state,\n\t\t\t[key]: ! state[key],\n\t\t};\n\tcase 'FETCH_RECIPESTATES':\n\t\tswitch ( action.status ) {\n\t\tcase 'success':\n\t\t\treturn action.response;\n\t\t}\n\t}\n\treturn state;\n};\n\n// Reducer for setting update.\nfunction settings( state = { weather_location: 'foo' }, action ) {\n\tswitch ( action.type ) {\n\tcase 'UPDATE_SETTING':\n\t\treturn {\n\t\t\t...state,\n\t\t\t[action.key]: action.value,\n\t\t};\n\tcase 'FETCH_SETTINGS':\n\t\tswitch ( action.status ) {\n\t\tcase 'success':\n\t\t\treturn action.response;\n\t\t}\n\t}\n\treturn state;\n};\n\n\n// Reducer for recipeStates fetching.\nfunction fetchRecipeStates( state = { isLoading: false }, action ) {\n\tswitch ( action.type ) {\n\tcase 'FETCH_RECIPESTATES':\n\t\tswitch ( action.status ) {\n\t\tcase undefined:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: true,\n\t\t\t};\n\t\tcase 'success':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: false,\n\t\t\t};\n\t\tcase 'error':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: true,\n\t\t\t\tisLoading: false,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n};\n\n// Reducer for settings fetching.\nfunction fetchSettings( state = { isLoading: false }, action ) {\n\tswitch ( action.type ) {\n\tcase 'SAVING_SETTINGS':\n\t\tconsole.log( 'saving?', action.saving );\n\t\treturn {\n\t\t\t...state,\n\t\t\tisSaving: action.saving,\n\t\t};\n\tcase 'FETCH_SETTINGS':\n\t\tswitch ( action.status ) {\n\t\tcase undefined:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: true,\n\t\t\t};\n\t\tcase 'success':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: false,\n\t\t\t};\n\t\tcase 'error':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: true,\n\t\t\t\tisLoading: false,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n};\n\nconst Store = registerStore( 'ltwp', {\n\treducer: combineReducers( {\n\t\tfetchRecipeStates,\n\t\tstepToggled,\n\t\tsettings,\n\t\tfetchSettings,\n\t} ),\n\tactions,\n\n\tselectors: {\n\t\tgetRecipes( state ) {\n\t\t\treturn state.recipes;\n\t\t},\n\t\tgetSettings( state ) {\n\t\t\treturn state.settings;\n\t\t},\n\t\tgetStepToggled( state ) {\n\t\t\treturn state.stepToggled || {};\n\t\t},\n\t\tisSaving( state ) {\n\t\t\treturn state.fetchSettings && state.fetchSettings.isSaving;\n\t\t},\n\t\tisLoading( state ) {\n\t\t\treturn state.fetchRecipeStates && state.fetchRecipeStates.isLoading\n\t\t\t\t|| state.fetchSettings && state.fetchSettings.isLoading;\n\t\t},\n\t\thasError( state ) {\n\t\t\treturn state.fetchRecipeStates && state.fetchRecipeStates.error\n\t\t\t\t|| state.fetchSettings && state.fetchSettings.error;\n\t\t},\n\t},\n} );\n\nasync function retrieveRecipeStates() {\n\tStore.dispatch( actions.requestRecipeStates() );\n\tconst opts = {\n\t\theaders: {\n\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t},\n\t};\n\tvar response = await fetch( wpApiSettings.root + 'ltwp/v1/recipes', opts );\n\tvar json = await response.json();\n\tif ( json ) {\n\t\tStore.dispatch( actions.receiveRecipeStates( json ) );\n\t} else {\n\t\tStore.dispatch( actions.receiveRecipeStatesError() );\n\t}\n}\n\nasync function saveRecipeStates() {\n\tconst opts = {\n\t\theaders: {\n\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t},\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify( Store.getState().stepToggled ),\n\t};\n\tfetch( wpApiSettings.root + 'ltwp/v1/recipes', opts );\n}\n\nasync function retrieveSettings() {\n\tStore.dispatch( actions.requestSettings() );\n\tconst opts = {\n\t\theaders: {\n\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t},\n\t};\n\tvar response = await fetch( wpApiSettings.root + 'ltwp/v1/settings', opts );\n\tvar json = await response.json();\n\tif ( json ) {\n\t\tStore.dispatch( actions.receiveSettings( json ) );\n\t} else {\n\t\tStore.dispatch( actions.receiveSettingsError() );\n\t}\n}\n\nasync function saveSettings() {\n\tStore.dispatch( actions.savingSettings( true ) );\n\tconst opts = {\n\t\theaders: {\n\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t},\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify( Store.getState().settings ),\n\t};\n\tvar response = await fetch( wpApiSettings.root + 'ltwp/v1/settings', opts );\n\tStore.dispatch( actions.savingSettings( false ) );\n}\n\nexport { Store as default, withSelect, withDispatch, saveRecipeStates, retrieveRecipeStates, saveSettings, retrieveSettings };","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}